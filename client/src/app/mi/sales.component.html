<div class="top-container">
  <div class="sale-container" *ngIf="products?.length >0">
    <div class="sale">
      Productos

      <div class="info">
        <ul>
          <li *ngFor="let p of products">
            <table>
              <tr>
                <td>
                  <span class="ex">{{p.qty}}</span>
                </td>
                <td>
                  <span>{{p.mi}}</span>
                </td>
                <td>
                  <span class="ex">{{p.sale_price}}</span>
                </td>
                <td>
                  <span class="ex">{{p.price_discount}}</span>
                </td>
              </tr>
            </table>
          </li>
        </ul>

      </div>
      <br />
      <div class="total">
        <!-- Total: <span>$ {{saleModel.price}}</span> -->
      </div>
      <br />
      <button (click)="makeSale()" class="waves-effect waves-light btn">VENDER</button>
    </div>

  </div>

  <div class="search-container">
    <div>
      <table>
        <tr>
          <td>
            Buscar por nombre de estudio
          </td>
        </tr>
        <tr>
          <td>
            <input [(ngModel)]="pageModel.hint" class="hint" (keyup.enter)="findMis()" placeholder="Estudio" />
          </td>
        </tr>
      </table>
    </div>
  </div>

  <div class="grid-container">
    <ag-grid-angular #agGrid style="width: 100%; height: 200px;" class="ag-fresh" [gridOptions]="gridOptions">
    </ag-grid-angular>
  </div>

  <hr />

  <div *ngIf="selectedMi" class="container">
    <div class="coMeEs_sentence">
      Estudio seleccionado
    </div>
    <div class="selected_mi">
      <table>
        <tr>
          <td class="info">Estudio:</td>
          <td>{{selectedMi.name}}</td>
        </tr>
        <tr>
          <td class="info">Descripción:</td>
          <td> {{selectedMi.description}}</td>
        </tr>
        <tr>
          <td class="info">Precio: </td>
          <td><span class="coMeEs_dark_bold">$ {{selectedMi.price}}</span></td>
        </tr>
      </table>
    </div>
    <div>
      <div>
        <p class="coMeEs_sentence_small"> ¿El cliente cuenta con código de descuento? Ingresalo </p>
      </div>

      <p>
        <input type="checkbox" class="filled-in" id="m-discount-toggler" [(ngModel)]="pageModel.toggleDiscount" />
        <label for="m-discount-toggler">Mostrar opciones de descuento</label>
      </p>

      <div *ngIf="pageModel.toggleDiscount">
        <div class="container">
          <table>
            <tr>
              <td>
                <p>
                  <input name="discountType" type="radio" [(ngModel)]="pageModel.discountType" value="coupon" id="m-coupon" />
                  <label for="m-coupon">Cupón</label>
                </p>
              </td>
              <td>
                <p>
                  <input name="discountType" type="radio" [(ngModel)]="pageModel.discountType" value="ref_mi" id="m-refmi" />
                  <label for="m-refmi">Estudio referenciado</label>
                </p>
              </td>
            </tr>
            <tr>
              <td>
                <input class="hint" [(ngModel)]="pageModel.discountCode" (keyup.enter)="getDiscount()" placeholder="Código de descuento" />
              </td>
            </tr>
          </table>
        </div>

        <div *ngIf="pageModel.notFoundDiscount" class="coMeEs_sentence">
          No se ha encontrado descuento
        </div>

        <div *ngIf="pageModel.discountFound">
          <div class="discount-info">
            <span class="coMeEs_dark_bold">Descuento:</span>
            <span class="enhaced_discount">{{discount}} %</span>
          </div>
          <button (click)="applyDiscount()" class="waves-effect waves-light btn">Aplicar descuento</button>
        </div>

        <div class="discount-info" class="right" *ngIf="priceDiscount">
          <span class="coMeEs_dark_bold">Precio con descuento:</span>
          <span class="enhaced_price"> $ {{priceDiscount}}</span>
        </div>
        <br />
        <br />

      </div>

    </div>
    <div class="right">
      <button (click)="addToSale()" class="waves-effect waves-light btn">Agregar a venta</button>
    </div>
  </div>
  <div>


  </div>
</div>
